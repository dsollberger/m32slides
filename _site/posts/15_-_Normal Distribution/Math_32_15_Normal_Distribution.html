<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Derek Sollberger">
<meta name="dcterms.date" content="2023-02-24">

<title>Math 32 - 15: Normal Distribution</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Math 32</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../slides.html">
 <span class="menu-text">Slides</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">15: Normal Distribution</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Derek Sollberger </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 24, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="cell">

</div>
<section id="development" class="level2">
<h2 class="anchored" data-anchor-id="development">Development</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Let us start with the mother function <span class="math inline">\(y = e^{-x^{2}}\)</span></p>
<p><img src="fig14-1.png" class="img-fluid"></p>
</div><div class="column" style="width:50%;">
<ul>
<li>symmetric graph and function</li>
<li>horizontal asymptote</li>
</ul>
</div>
</div>
<p>Next, most of the scientific community accepts placing a horizontal scaling factor of 1/2 in the exponent</p>
<p><span class="math display">\[y = e^{-x^{2}/2} = \text{exp}\left(-\displaystyle\frac{x^{2}}{2}\right)\]</span></p>
<p>to ensure that later calculations in the standard normal distribution have unit variance: <span class="math inline">\(\sigma^{2} = 1\)</span></p>
</section>
<section id="bell-curves" class="level2">
<h2 class="anchored" data-anchor-id="bell-curves">Bell Curves</h2>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Sample Size Consideration
</div>
</div>
<div class="callout-body-container callout-body">
<p>For elementary statistics courses, teachers say that using the normal distribution is a good idea when the sample size <span class="math inline">\(n &gt; 30\)</span>.</p>
</div>
</div>
<p>Depending on the situation, modeling with a normal distribution may need a transformation (moving the graph horizontally, stretching, etc.).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="fig14-2.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">bell curves</figcaption><p></p>
</figure>
</div>
</section>
<section id="probability-density-function" class="level2">
<h2 class="anchored" data-anchor-id="probability-density-function">Probability Density Function</h2>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Standard Normal Distribution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Historically, it was a good practice to pick one bell curve for calculations.</p>
</div>
</div>
<ul>
<li>Find the value of <span class="math inline">\(k\)</span> so that <span class="math inline">\(f(x) = ke^{-x^{2}/2}\)</span> is a probability density function.</li>
</ul>
</section>
<section id="probability-density-function-1" class="level2">
<h2 class="anchored" data-anchor-id="probability-density-function-1">Probability Density Function</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Probability Density Function
</div>
</div>
<div class="callout-body-container callout-body">
<p>At this point, we have the probability density function (PDF) of the <strong>standard normal distribution</strong>, denoted by lower-case Greek letter phi:</p>
<p><span class="math display">\[\text{PDF: } \phi(z) = \displaystyle\frac{1}{\sqrt{2\pi}}e^{-z^{2}/2}\]</span></p>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="fig14-3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">standard normal distribution</figcaption><p></p>
</figure>
</div>
</section>
<section id="parameters" class="level2">
<h2 class="anchored" data-anchor-id="parameters">Parameters</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Parameters
</div>
</div>
<div class="callout-body-container callout-body">
<p>We will now find the parameters—mean and variance—for the standard normal distribution. We find the expected value with</p>
<p><span class="math display">\[\text{E}[Z] = \displaystyle\int_{-\infty}^{\infty} \! z \cdot \phi(z) \, dz = \displaystyle\frac{1}{\sqrt{2\pi}}\displaystyle\int_{-\infty}^{\infty} \! z e^{-z^{2}/2} \, dz = 0\]</span></p>
<p>The second moment is</p>
<p><span class="math display">\[\text{E}[Z^{2}] = \displaystyle\int_{-\infty}^{\infty} \! z^{2} \cdot \phi(z) \, dz = \displaystyle\frac{1}{\sqrt{2\pi}}\displaystyle\int_{-\infty}^{\infty} \! z^{2} e^{-z^{2}/2} \, dz = \displaystyle\frac{ \sqrt{2\pi} }{ \sqrt{2\pi} } = 1\]</span></p>
<p>It follows that the variance is also one unit, so the parameters of the standard normal distribution are <span class="math inline">\(\mu = 0\)</span> and <span class="math inline">\(\sigma^{2} = 1\)</span>.</p>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Notation
</div>
</div>
<div class="callout-body-container callout-body">
<p>The notation <span class="math inline">\(X \sim N(\mu, \sigma^{2})\)</span> says that random variable <span class="math inline">\(X\)</span> is normally distributed with mean <span class="math inline">\(\mu\)</span> and variance <span class="math inline">\(\sigma^{2}\)</span>. For example, the standard normal distribution is denoted as <span class="math inline">\(Z \sim N(0,1)\)</span></p>
</div>
</div>
<ul>
<li>What is the median of the standard normal distribution?</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="fig14-3.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">median?</figcaption><p></p>
</figure>
</div>
</section>
<section id="cumulative-distribution-function" class="level2">
<h2 class="anchored" data-anchor-id="cumulative-distribution-function">Cumulative Distribution Function</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
CDF
</div>
</div>
<div class="callout-body-container callout-body">
<p>The cumulative distribution function (CDF) for the standard normal distribution is defined as the following integral function and denoted by upper-case Greek letter Phi:</p>
<p><span class="math display">\[\Phi(z) = \displaystyle\frac{1}{\sqrt{2\pi}} \displaystyle\int_{-\infty}^{z} \! e^{-t^{2}/2} \, dt\]</span></p>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<p>Recall: for continuous probability distributions, probabilities are the areas under the curve</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="fig14-4.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">area under the curve</figcaption><p></p>
</figure>
</div>
</div><div class="column" style="width:50%;">
<p>Here in Math 32, instead of doing the integral (with the ``polar trick’’) or referring to a textbook standard normal distribution table, we will perform calculations for the normal distribution in terms of CDF <span class="math inline">\(\Phi\)</span></p>
</div>
</div>
</section>
<section id="empirical-rule" class="level2">
<h2 class="anchored" data-anchor-id="empirical-rule">Empirical Rule</h2>
<p>Statistics instructors like to make the following statements to guide intuition about the normal distribution and standard deviations.</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">1 SD</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">2 SDs</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">3 SDs</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>About 67% of data falls within one standard deviation of the mean.</p>
<p><img src="fig14-5.png" class="img-fluid"></p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>About 95% of data falls within 2 standard deviations of the mean.</p>
<p><img src="fig14-6.png" class="img-fluid"></p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>About 99% of data falls within 3 standard deviations of the mean.</p>
<p><img src="fig14-7.png" class="img-fluid"></p>
</div>
</div>
</div>
</section>
<section id="optional-error-function" class="level2">
<h2 class="anchored" data-anchor-id="optional-error-function">(optional) Error Function</h2>
<div class="callout-caution callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
(optional) Error Function
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Some scientific literature refers to the area under the curve of the probability density function of the <span class="math inline">\(X \sim N(0, 1/2)\)</span> normal distribution as the </p>
<p><span class="math display">\[\text{erf}(x) = \displaystyle\frac{2}{\sqrt{\pi}}\int_{0}^{x} \! e^{-t^{2}/2} \, dt\]</span></p>
<p>and we can recover the CDF of the standard normal distribution with</p>
<p><span class="math display">\[\Phi(x) = \displaystyle\frac{1}{2}\left[  1 + \text{erf}\left(\displaystyle\frac{x}{\sqrt{2}}\right) \right]\]</span></p>
</div>
</div>
</div>
</section>
<section id="general-normal-distribution" class="level2">
<h2 class="anchored" data-anchor-id="general-normal-distribution">General Normal Distribution</h2>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
General Normal Distribution
</div>
</div>
<div class="callout-body-container callout-body">
<p>When we model applications with <span class="math inline">\(X \sim N(\mu, \sigma^{2})\)</span>, by applying the <span class="math inline">\(z\)</span>-score transformation</p>
<p><span class="math display">\[z = \displaystyle\frac{x - \mu}{\sigma}\]</span></p>
<p>the normal distribution has probability density function</p>
<p><span class="math display">\[\text{PDF: } f(x; \mu, \sigma) = \displaystyle\frac{1}{\sigma\sqrt{2\pi}} \cdot e^{-\frac{1}{2}\left(\frac{x-\mu}{\sigma}\right)^{2}}\]</span></p>
<p>and cumulative distribution function</p>
<p><span class="math display">\[F(x) = \Phi\left(\displaystyle\frac{x-\mu}{\sigma}\right) = \displaystyle\frac{1}{2}\left[1 + \text{erf}\left(\displaystyle\frac{x-\mu}{\sigma\sqrt{2}}\right)\right]\]</span></p>
<p><span class="math display">\[~\]</span></p>
<p>R code: <code>pnorm(x, mu, sd)</code></p>
</div>
</div>
</section>
<section id="applications-of-the-normal-distribution" class="level2">
<h2 class="anchored" data-anchor-id="applications-of-the-normal-distribution">Applications of the Normal Distribution</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Fewer</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">More</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Between</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Characterize</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Suppose that the incubation period—that is, the time between being infected with the virus and showing symptoms—for Covid-19 is normally distributed with a mean of 8 days and a standard deviation of 3 days. Find the probability that a randomly selected case demonstrated symptoms in fewer than 7 days.</p>
<p><img src="fig14-8.png" class="img-fluid"></p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>Girl Scout Thin Mint cookies have a mean size of 0.25 ounces. Find the probability that one randomly selected cookie has a size of more than 0.27 ounces if the standard deviation is 0.03 ounces. Assume a normal distribution.</p>
<p><img src="fig14-9.png" class="img-fluid"></p>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p>The cones in the eye detect light. The absorption rate of cones is normally distributed. In particular, the “green” cones have a mean of 535 nanometers and a standard deviation of 65 nanometers. If an incoming ray of light has wavelengths between 550 and 575 nanometers, calculate the percentage of that ray of light that will be absorbed by the green cones.</p>
<p><img src="fig14-10.png" class="img-fluid"></p>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<p>Suppose that the number of french fries in the batches at In-n-Out are normally distributed with a mean of 42 french fries and a standard deviation of 3.7 french fries. Your friend tells you that the In-n-Out employee is flirting with you if you end up with a french fry count in the top 5 percent. How should we characterize the top 5 percent of french fries?</p>
<p><img src="fig14-11.png" class="img-fluid"></p>
</div>
</div>
</div>
</section>
<section id="looking-ahead" class="level2">
<h2 class="anchored" data-anchor-id="looking-ahead">Looking Ahead</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>due soon
<ul>
<li>WHW6</li>
<li>JHW4</li>
<li>Mid-Semester Survey</li>
</ul></li>
<li>Be mindful of before-lecture quizzes</li>
</ul>
<p>Exam 1 will be on Wed., Mar.&nbsp;1</p>
<ul>
<li>more information in weekly announcements</li>
</ul>
<p>No lecture session for Math 32:</p>
<ul>
<li>Mar 10, Mar 24</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img src="date_format.png" class="img-fluid"></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://mobile.twitter.com/gvwilson/status/1579610006055313408.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">tweet source</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">

</div><div class="column" style="width:50%;">

</div>
</div>
<div class="panel-tabset">

</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>