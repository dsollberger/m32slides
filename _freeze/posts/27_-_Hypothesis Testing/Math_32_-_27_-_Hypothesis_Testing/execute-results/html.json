{
  "hash": "46ad13ffaa4b42885a39a2674a70c7e8",
  "result": {
    "markdown": "---\ntitle: \"Hypothesis Testing\"\nauthor: \"Derek Sollberger\"\ndate: \"05 December, 2022\"\noutput:\n  html_document:\n    toc: true\n    theme: cerulean\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::opts_chunk$set(echo = TRUE)\n# install.packages() if needed\nlibrary(\"infer\")         #pipeline workflow for hypothesis testing\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'infer' was built under R version 4.2.2\n```\n:::\n\n```{.r .cell-code}\nlibrary(\"moderndive\")    #textbook's package and data\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'moderndive' was built under R version 4.2.2\n```\n:::\n\n```{.r .cell-code}\nlibrary(\"patchwork\")     #easily let's me show graphs side-by-side\nlibrary(\"tidyverse\")     #the overall programming style universe\n```\n:::\n\n\nSource:  **Statistical Inference via Data Science:** *A Modern Dive into R and the Tidyverse*\n\n* Chapter 9: Hypothesis Testing\n* [https://moderndive.com/9-hypothesis-testing.html](https://moderndive.com/9-hypothesis-testing.html)\n\n# Setting: Job Promotions\n\n* data from a *Journal of Applied Psychology* study published in 1974\n* 48 bank supervisors asked to look at a resume\n* identical resume except the name at the top: 24 \"female\" names and 24 \"male\" names\n\n\n::: {.cell}\n\n```{.r .cell-code}\npromotions %>%\n  sample_n(size = 10) %>%\n  arrange(id)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 3\n      id decision gender\n   <int> <fct>    <fct> \n 1     2 promoted male  \n 2     3 promoted male  \n 3     4 promoted male  \n 4     5 promoted male  \n 5    11 promoted male  \n 6    12 promoted male  \n 7    13 promoted male  \n 8    25 promoted female\n 9    34 promoted female\n10    44 not      female\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(promotions, aes(x = gender, fill = decision)) +\n  geom_bar() +\n  labs(title = \"Bank Promotions Study\",\n       subtitle = \"identical resumes except for applicant name\",\n       caption = \"Source: Journal of Applied Psychology\",\n       x = \"Gender of name on resume\")\n```\n\n::: {.cell-output-display}\n![](Math_32_-_27_-_Hypothesis_Testing_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npromotions %>% \n  group_by(gender, decision) %>% \n  tally()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 3\n# Groups:   gender [2]\n  gender decision     n\n  <fct>  <fct>    <int>\n1 male   not          3\n2 male   promoted    21\n3 female not         10\n4 female promoted    14\n```\n:::\n:::\n\n\n* male promotion rate: 21/24 = 0.875\n* female promotion rate: 14/24 = 0.583\n* difference in rates: 0.875 - 0.583 = 0.292\n\n## Shuffling\n\nIf `gender` did not matter when it comes to these job promotions, then it should not matter if we shuffle the `gender` labels in the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\noriginal_bar_graph <- ggplot(promotions, aes(x = gender, fill = decision)) +\n  geom_bar() +\n  labs(title = \"original\",\n       x = \"Gender of name on resume\") +\n  theme(legend.position = \"none\")\n\ngender_shuffled <- promotions\ngender_shuffled$gender <- sample(promotions$gender) \n#sampled without replacement\n\nshuffled_bar_graph <- gender_shuffled %>%\n  ggplot(aes(x = gender, fill = decision)) +\n  geom_bar() +\n  labs(title = \"shuffled\",\n       x = \"Gender of name on resume\")\n\noriginal_bar_graph + shuffled_bar_graph\n```\n\n::: {.cell-output-display}\n![](Math_32_-_27_-_Hypothesis_Testing_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n* in the previous chapter, we did a *bootstrap method* that used sampling with replacement\n* here, we are performing a *permutation test* that uses sampling without replacement\n\n\n# Hypothesis Test of Proportions\n\n1.  \"First, a *hypothesis* is a statement about the value of an unknown population parameter. In our resume activity, our population parameter is the difference in population proportions $p_{m} - p_{f}$\"\n\n2.  \"Second, a hypothesis test consists of a test between two competing hypotheses ... Generally the *null hypothesis* is a claim that there really is 'no effect' or 'no difference.'\" Here our null hypothesis is\n\n* $H_{0}$: men and women are promoted at the same rate\n\n\"Generally the *alternative hypothesis* is the claim the experimenter or researcher wants to establish or find evidence for and is viewed as a 'challenger' hypothesis to the null hypothesis\".  Here our alternative hypothesis is\n\n* $H_{a}$: men are promoted at a higher rate than women\n\nIn math symbols, we have\n\n\n$$\\begin{array}{rrcl}\n  H_{o}: p_{m} - p_{f} & = & 0 \\\\\n  H_{a}: p_{m} - p_{f} & > & 0 \\\\\n\\end{array}$$\n\n3.  \"Third, a *test statistic* is a point estimate/sample statistic formula used for hypothesis testing, where a sample statistic is merely a summary statistic based on a sample of observations.\"  Here, our test statistic $\\hat{p}_{m} - \\hat{p}_{f}$ estimates the parameter of interest: the difference in population proportions $p_{m} - p_{f}$\n\n4.  \"Fourth, the observed test statistic is the value of the test statistic that we observed in real-life.\"  In this example the observed difference was\n\n\n$$\\hat{p}_{m} - \\hat{p}_{f} = 0.875 - 0.583 = 0.292$$\n\n\n5.  \"Fifth, the null distribution is the sampling distribution of the test statistic assuming the null hypothesis $H_0$ is true.\"\n\n## Conducting a Hypothesis Test with `infer`\n\n::: {.cell}\n\n```{.r .cell-code}\npromotions %>% \n  specify(formula = decision ~ gender, success = \"promoted\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: decision (factor)\nExplanatory: gender (factor)\n# A tibble: 48 × 2\n   decision gender\n   <fct>    <fct> \n 1 promoted male  \n 2 promoted male  \n 3 promoted male  \n 4 promoted male  \n 5 promoted male  \n 6 promoted male  \n 7 promoted male  \n 8 promoted male  \n 9 promoted male  \n10 promoted male  \n# … with 38 more rows\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npromotions %>% \n  specify(formula = decision ~ gender, success = \"promoted\") %>% \n  # \"point\" for single sample or \"independence\" for two samples\n  hypothesize(null = \"independence\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: decision (factor)\nExplanatory: gender (factor)\nNull Hypothesis: independence\n# A tibble: 48 × 2\n   decision gender\n   <fct>    <fct> \n 1 promoted male  \n 2 promoted male  \n 3 promoted male  \n 4 promoted male  \n 5 promoted male  \n 6 promoted male  \n 7 promoted male  \n 8 promoted male  \n 9 promoted male  \n10 promoted male  \n# … with 38 more rows\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npromotions_permutations <- promotions %>% \n  specify(formula = decision ~ gender, success = \"promoted\") %>% \n  hypothesize(null = \"independence\") %>% \n  generate(reps = 1000, type = \"permute\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution <- promotions %>% \n  specify(formula = decision ~ gender, success = \"promoted\") %>% \n  hypothesize(null = \"independence\") %>% \n  generate(reps = 1000, type = \"permute\") %>% \n  calculate(stat = \"diff in props\", order = c(\"male\", \"female\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# observed difference in proportions\nobs_diff_prop <- promotions %>% \n  specify(decision ~ gender, success = \"promoted\") %>% \n  calculate(stat = \"diff in props\", order = c(\"male\", \"female\"))\nobs_diff_prop\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: decision (factor)\nExplanatory: gender (factor)\n# A tibble: 1 × 1\n   stat\n  <dbl>\n1 0.292\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualize(null_distribution, bins = 10)\n```\n\n::: {.cell-output-display}\n![](Math_32_-_27_-_Hypothesis_Testing_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualize(null_distribution, bins = 10) + \n  # choices for direction are \"right\", \"left\", and \"both\"\n  shade_p_value(obs_stat = obs_diff_prop, direction = \"right\")\n```\n\n::: {.cell-output-display}\n![](Math_32_-_27_-_Hypothesis_Testing_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution %>% \n  get_p_value(obs_stat = obs_diff_prop, direction = \"right\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  p_value\n    <dbl>\n1    0.03\n```\n:::\n:::\n\nFor NHST (null hypothesis significance testing), many scientists compare the p-value to a significance level of $\\alpha = 0.05$.  Since the p-value < 0.05, we *reject the null hypothesis* of equal proportions of promotions among men and women.\n\n\n## Comparision to Confidence Intervals\n\n::: {.cell}\n\n```{.r .cell-code}\nbootstrap_distribution <- promotions %>% \n  specify(formula = decision ~ gender, success = \"promoted\") %>% \n  # Change 1 - Remove hypothesize():\n  # hypothesize(null = \"independence\") %>% \n  # Change 2 - Switch type from \"permute\" to \"bootstrap\":\n  generate(reps = 1000, type = \"bootstrap\") %>% \n  calculate(stat = \"diff in props\", order = c(\"male\", \"female\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npercentile_ci <- bootstrap_distribution %>% \n  get_confidence_interval(level = 0.95, type = \"percentile\")\npercentile_ci\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 2\n  lower_ci upper_ci\n     <dbl>    <dbl>\n1   0.0624    0.508\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualize(bootstrap_distribution) + \n  shade_confidence_interval(endpoints = percentile_ci)\n```\n\n::: {.cell-output-display}\n![](Math_32_-_27_-_Hypothesis_Testing_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n# Demographics Examples\n\n::: {.cell}\n\n```{.r .cell-code}\n# since the data is in a CSV file, we will use the read_csv() function to load the data\ndemo_df <- read_csv(\"demographics_survey_data.csv\") \n\nstr(demo_df, give.attr = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nspc_tbl_ [281 × 131] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ enrolled            : chr [1:281] \"Bio 18\" \"Bio 18\" \"Bio 18\" \"Bio 18\" ...\n $ home                : chr [1:281] \"Southern California\" \"Northern California\" \"Southern California\" \"Central California\" ...\n $ ethnicity           : chr [1:281] \"Hispanic or Latino\" \"Black or African American\" \"Asian or Pacific Islander\" \"Hispanic or Latino\" ...\n $ classStanding       : chr [1:281] \"Junior\" \"Junior\" \"Junior\" \"Junior\" ...\n $ unitsCompleted      : num [1:281] 40 70 63 80 48 68 63 80 90 88 ...\n $ unitsThisSemester   : num [1:281] 17 17 17 12 12 16 17 NA 13 16 ...\n $ GPA                 : num [1:281] 3.1 3.25 3.61 3.4 2.5 ...\n $ statsBefore         : chr [1:281] \"Yes: Math 15 at UC Merced\" \"Yes: AP Statistics\" \"Yes: Math 15 at UC Merced\" \"Yes: another (other than Math 15) statistics training course at UC Merced\" ...\n $ retakingWithDerek   : chr [1:281] \"No\" \"No\" \"No\" \"No\" ...\n $ learningStyle       : chr [1:281] \"Visual\" \"Kinesthetic\" \"Kinesthetic\" \"Visual\" ...\n $ hoursStudying       : num [1:281] 3 12 4 4 6 5 10 NA 24 8 ...\n $ birthdayMonth       : chr [1:281] \"June\" \"January\" \"August\" \"December\" ...\n $ height              : num [1:281] 70 NA 63 68 55 59.5 66 NA 69 62 ...\n $ shoeSize            : num [1:281] 11 8 8 8 4.5 6 10 NA 10 6 ...\n $ weight              : num [1:281] 220 190 116 157 125 103 120 NA 220 135 ...\n $ calories            : num [1:281] 2000 1200 NA 1000 2500 1500 1700 NA 2800 1500 ...\n $ exercise            : num [1:281] 0 7 3 3 5 0 2 NA 0 6 ...\n $ sodas               : num [1:281] 3 0 0 0 0 2 0 NA 0 0 ...\n $ alcohol             : num [1:281] 2 1 0 0 12 2 0 NA 0 1 ...\n $ sleep               : num [1:281] 8 6 6 6 4 5 7 NA 7 7 ...\n $ socialMedia         : chr [1:281] \"Google+\" \"Facebook,Instagram,Tagged\" \"Instagram,Pinterest\" \"Facebook,Instagram,Pinterest,Twitter\" ...\n $ smartPhones         : chr [1:281] \"iPhone\" \"Android\" \"iPhone\" \"iPhone\" ...\n $ baseball            : chr [1:281] NA \"San Franciso Giants\" NA NA ...\n $ football            : chr [1:281] NA \"San Francisco 49ers\" NA NA ...\n $ basketball          : chr [1:281] NA \"Golden State Warriors\" NA NA ...\n $ hockey              : chr [1:281] NA NA NA NA ...\n $ politics            : num [1:281] 70 55 0 30 50 100 40 NA 0 0 ...\n $ religious           : num [1:281] 60 35 10 65 50 50 10 NA 0 80 ...\n $ Kinsey              : chr [1:281] \"0\" \"0\" \"2\" \"0\" ...\n $ livingSituation     : chr [1:281] \"dormitory\" \"off-campus apartment in Merced\" \"dormitory\" \"commute outside of Merced\" ...\n $ roommates           : num [1:281] 6 1 3 4 3 4 3 NA 5 1 ...\n $ roommatesLiked      : num [1:281] 0 1 0 4 2 4 3 NA 5 1 ...\n $ hoursWorking        : num [1:281] 0 8 8 0 8 0 0 NA 0 0 ...\n $ happinessUCM        : num [1:281] 80 70 60 75 50 60 70 NA 100 90 ...\n $ happinessMercedCity : num [1:281] 70 45 40 60 30 30 60 NA 50 0 ...\n $ transportation      : chr [1:281] \"car\" \"car\" \"car\" \"car\" ...\n $ counselors          : num [1:281] 85 25 70 50 50 70 80 NA 80 70 ...\n $ anxiousThisClass    : num [1:281] 70 10 68 80 50 50 20 NA 10 60 ...\n $ highSchoolType      : chr [1:281] \"public school\" \"private school\" \"private school\" \"public school\" ...\n $ anxiousTransitition : num [1:281] 80 95 20 25 50 40 80 NA 80 50 ...\n $ drugs               : chr [1:281] \"No\" \"Yes\" \"No\" \"No\" ...\n $ diningCommons       : num [1:281] 30 50 25 0 0 50 40 NA 51 30 ...\n $ diningOptions       : chr [1:281] \"dining commons\" NA \"dining commons,Bookstore\\\\, Marketplace\\\\, and/or the Lantern\" \"Bookstore\\\\, Marketplace\\\\, and/or the Lantern,vending machines\" ...\n $ enrolled2           : chr [1:281] \"Bio 18\" \"Bio 18\" \"Bio 18\" \"Bio 18\" ...\n $ UCMtopChoice        : chr [1:281] \"No\" \"Yes\" \"No\" \"Yes\" ...\n $ parties             : chr [1:281] \"No\" \"No\" \"No\" \"No\" ...\n $ firstGeneration     : chr [1:281] \"No\" \"Yes\" \"Yes\" \"Yes\" ...\n $ languages           : num [1:281] 2 2 1.5 2.1 2 2 2 3 2.3 2 ...\n $ parentsMarried      : chr [1:281] \"Yes\" \"Yes\" \"No\" \"No\" ...\n $ homesickness        : num [1:281] 30 5 30 0 50 0 75 0 5 67 ...\n $ safteyCampus        : num [1:281] 70 80 100 98 90 20 90 50 60 90 ...\n $ makingFriends       : num [1:281] 70 100 75 79 50 10 80 100 70 50 ...\n $ GreekLife           : chr [1:281] \"No\" \"No\" \"No\" \"No\" ...\n $ campusSports        : chr [1:281] \"Yes: sports club\" \"No\" \"No\" \"No\" ...\n $ anxiousOfficeHours  : num [1:281] 20 70 100 45 80 30 80 0 90 45 ...\n $ studyGroups         : num [1:281] 40 90 50 70 90 10 15 100 85 100 ...\n $ allowance           : num [1:281] 0 NA 0 400 1000 0 400 0 0 125 ...\n $ familyIncome        : num [1:281] 70000 NA 30000 47000 68000 80000 NA 100000 20000 45000 ...\n $ budgetHousing       : num [1:281] 10 NA 80 0 60 20 NA 40 0 50 ...\n $ budgetFood          : num [1:281] 20 NA 10 30 25 20 40 30 20 25 ...\n $ budgetTransportation: num [1:281] 20 NA 0 50 5 10 25 50 0 25 ...\n $ budgetEducation     : num [1:281] 20 NA 10 20 10 50 20 10 30 10 ...\n $ retirementSavings   : chr [1:281] \"No\" \"No\" \"No\" \"No\" ...\n $ happiness           : num [1:281] 60 95 50 80 70 10 85 80 65 50 ...\n $ intelligence        : num [1:281] 30 70 50 70 45 90 88 80 75 67 ...\n $ attractiveness      : num [1:281] 50 69 50 60 50 70 NA 30 100 60 ...\n $ transferring        : chr [1:281] \"No\" \"No\" \"No\" \"No\" ...\n $ relationshipStatus  : chr [1:281] \"Single\" \"In a relationship\" \"Single\" \"In a relationship\" ...\n $ favoriteColor       : chr [1:281] \"Pink\" \"purple\" \"baby blue\" \"Tan\" ...\n $ favoriteNumber      : num [1:281] 8 413 5 11 7 8 10 12 9 7 ...\n $ happinessUCMcourses : num [1:281] 60 90 60 80 80 50 85 100 85 78 ...\n $ showering           : num [1:281] 7 3.5 6 6 5 7 6 5 8 5 ...\n $ brushingTeeth       : num [1:281] 14 7 14 14 14 10 14 20 14 5 ...\n $ flossing            : num [1:281] 6 7 1 5 10 0 NA 10 5 2 ...\n $ washingHair         : num [1:281] 7 3.5 7 6 5 7 6 5 3 3 ...\n $ pets                : num [1:281] 0 0 0 0 0 2 2 0 0 0 ...\n $ homeVisits          : chr [1:281] \"holidays\" \"holidays\" \"holidays\" \"weekly\" ...\n $ UCMfinanialAid      : num [1:281] 60 100 50 0 95 70 80 60 100 100 ...\n $ careerConfidence    : num [1:281] 85 70 30 79 0 30 50 90 75 86 ...\n $ siblings            : num [1:281] 3 2 3 3 4 2 3 1 4 1 ...\n $ favoriteTV          : chr [1:281] \"Deathnote\" \"Crazy Ex Girlfriend\" \"Atlanta\" NA ...\n $ favoriteMovie       : chr [1:281] \"Howl\\x92s Moving Castle\" \"Con Air\" \"Andre\" NA ...\n $ loneliness          : num [1:281] 50 3 20 10 50 50 30 80 30 5 ...\n $ organized           : num [1:281] 55 50 50 80 50 100 80 70 85 67 ...\n $ breakfast           : chr [1:281] \"No\" \"Yes\" \"No\" \"No\" ...\n $ snacks              : num [1:281] 3 3 2 3 2 3 3 3 3 3 ...\n $ mandms              : num [1:281] 5 0 0 400 100 5 NA 50 7 20 ...\n $ GPAhighSchool       : num [1:281] 3.4 3.4 3.6 4 2.3 3.7 3.8 3.9 4.1 3.6 ...\n $ SATscore            : num [1:281] 1160 NA 1100 NA 900 1300 1200 600 1000 1050 ...\n $ GreekLifeFuture     : chr [1:281] \"I do not plan to join a fraternity nor sorority\" NA \"I do not plan to join a fraternity nor sorority\" \"I do not plan to join a fraternity nor sorority\" ...\n $ campusGroups        : num [1:281] 50 20 0 0 20 0 20 50 0 25 ...\n $ procrastinator      : chr [1:281] \"Yes\" \"Yes\" \"Yes\" \"Yes\" ...\n $ enrolled3           : chr [1:281] \"Bio 18\" \"Bio 18\" \"Bio 18\" \"Bio 18\" ...\n $ computerAccess      : chr [1:281] \"Laptop computer,Tablet\" \"Laptop computer\" \"Laptop computer\" \"Laptop computer,Tablet\" ...\n $ reddit              : chr [1:281] \"Yes\" \"No\" \"No\" \"No\" ...\n $ friends             : num [1:281] 3 10 30 8 30 2 4 6 10 10 ...\n $ musicStudying       : chr [1:281] \"No\" \"Yes\" \"Yes\" \"Yes\" ...\n $ thisClassCost       : num [1:281] 0 0 NA 0 NA ...\n $ BachelorsUCM        : chr [1:281] \"I plan on earning a bachelor's degree at UC Merced\" \"I plan on earning a bachelor's degree at UC Merced\" \"I plan on earning a bachelor's degree at UC Merced\" \"I plan on earning a bachelor's degree at UC Merced\" ...\n  [list output truncated]\n```\n:::\n:::\n\n## Smart Phone Loyalty vs Class Standing\n\n* null hypothesis: Sophomores and Juniors choose iPhones and Androids with the same proportions\n* alternative hypothesis: Sophomores and Juniors choose iPhones and Androids with different proportions\n\n* predictor variable (categorical): `classStanding`\n* response variable (numerical): `smartPhones`\n\n::: {.cell}\n\n```{.r .cell-code}\n# table(demo_df$classStanding)\n# table(demo_df$smartPhones)\ndemo_df %>%\n  filter(classStanding == \"Sophomore\" | classStanding == \"Junior\") %>%\n  filter(smartPhones == \"Android\" | smartPhones == \"iPhone\") %>%\n  group_by(classStanding, smartPhones) %>%\n  summarize(classStanding = n())\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'classStanding'. You can override using the\n`.groups` argument.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 2\n# Groups:   classStanding [4]\n  classStanding smartPhones\n          <int> <chr>      \n1            47 Android    \n2           118 iPhone     \n3            12 Android    \n4            23 iPhone     \n```\n:::\n:::\n\n\nIn this scenario, our one-sided hypothesis test looks at a difference of two means.\n\n$$\\begin{array}{rrcl}\n\n  H_{0}: p_{F} - p_{M} & = & 0 \\\\\n  H_{a}: p_{F} - p_{M} & \\neq & 0 \\\\\n\\end{array}$$\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# observed difference in proportions\nobs_diff_prop <- demo_df %>%\n  filter(classStanding == \"Sophomore\" | classStanding == \"Junior\") %>%\n  filter(smartPhones == \"Android\" | smartPhones == \"iPhone\") %>%\n  specify(smartPhones ~ classStanding, success = \"iPhone\") %>% \n  calculate(stat = \"diff in props\", order = c(\"Sophomore\", \"Junior\"))\nobs_diff_prop\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: smartPhones (factor)\nExplanatory: classStanding (factor)\n# A tibble: 1 × 1\n     stat\n    <dbl>\n1 -0.0580\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution <- demo_df %>%\n  filter(classStanding == \"Sophomore\" | classStanding == \"Junior\") %>%\n  filter(smartPhones == \"Android\" | smartPhones == \"iPhone\") %>%\n  specify(smartPhones ~ classStanding, success = \"iPhone\") %>% \n  hypothesize(null = \"independence\") %>%\n  generate(reps = 1000, type = \"permute\") %>% \n  calculate(stat = \"diff in props\", order = c(\"Sophomore\", \"Junior\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualize(null_distribution, bins = 10) + \n  shade_p_value(obs_stat = obs_diff_prop, direction = \"two_sided\")\n```\n\n::: {.cell-output-display}\n![](Math_32_-_27_-_Hypothesis_Testing_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution %>% \n  get_p_value(obs_stat = obs_diff_prop, direction = \"two_sided\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  p_value\n    <dbl>\n1   0.632\n```\n:::\n:::\n\n\n\n# Exercises\n\n## Procrastination vs Partying\n\nThe survey questions were\n\n* \"Do you consider yourself to be a procrastinator?\"\n* \"Do you plan to attend at least one party per month this semester?\"\n\n* colloquial hypothesis: Party goers are more likely to be procrastinators\n* null hypothesis: Procrastinator proportion is the same regardless of party going plans\n* alternative hypothesis: Party goers are more likely to be procrastinators\n\n* predictor variable (categorical): `parties`\n* response variable (categorical): `procrastinator`\n\nIn this scenario, our one-sided hypothesis test looks at a difference of two proportions.\n\n\n$$\\begin{array}{rrcl}\n  H_{0}: p_{Y} - p_{N} & = & 0 \\\\\n  H_{a}: p_{Y} - p_{N} & > & 0 \\\\\n\\end{array}$$\n\n(a) Compute the observed difference in proportions for the procrastination grouped by parties\n\n::: {.cell}\n\n```{.r .cell-code}\n# table(demo_df$procrastinator)\n# table(demo_df$parties)\n```\n:::\n\n(b) Build a null distribution toward the hypothesis test.\n\n::: {.cell}\n\n:::\n\n(c) Use the `visualize` function to graph the null distribution and shade the p-value.\n\n::: {.cell}\n\n:::\n\n(d) Compute the p-value for the hypothesis test, and then write a sentence to describe the conclusion of the hypothesis test.\n\n::: {.cell}\n\n:::\n\n## Campus Food Satisfaction vs Class Standing\n\n* null hypothesis: Sophomores and Juniors report the same levels of happiness with campus food\n* alternative hypothesis: Sophomores and Juniors report different levels of happiness with campus food\n\n* predictor variable (categorical): `classStanding`\n* response variable (numerical): `diningCommons`\n\n::: {.cell}\n\n```{.r .cell-code}\n# table(demo_df$classStanding)\n# summary(demo_df$diningCommons)\ndemo_df |>\n  filter(classStanding == \"Sophomore\" | classStanding == \"Junior\") |>\n  filter(diningCommons >= 0 & diningCommons <= 100) |>\n  group_by(classStanding) |>\n  summarize(min = min(diningCommons, na.rm = TRUE),\n            xbar = mean(diningCommons, na.rm = TRUE),\n            median = median(diningCommons, na.rm = TRUE),\n            max = sd(diningCommons, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 5\n  classStanding   min  xbar median   max\n  <chr>         <dbl> <dbl>  <dbl> <dbl>\n1 Junior            0  30.1     30  25.7\n2 Sophomore         0  30.8     35  26.4\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# table(demo_df$classStanding)\n# summary(demo_df$diningCommons)\ndemo_df |>\n  filter(classStanding == \"Sophomore\" | classStanding == \"Junior\") |>\n  filter(diningCommons >= 0 & diningCommons <= 100) |>\n  ggplot(aes(x = classStanding, y = diningCommons)) +\n  geom_boxplot(aes(fill = classStanding)) +\n  labs(title = \"Students Rating of the Main Campus Food Options\",\n       subtitle = \"2022\",\n       caption = \"UC Merced\",\n       x = \"class standing\",\n       y = \"favorability (0 = low, 100 = high)\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Math_32_-_27_-_Hypothesis_Testing_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\nIn this scenario, our two-sided hypothesis test looks at a difference of two means.\n\n$$\\begin{array}{rrcl}\n\n  H_{0}: \\mu_{S} - \\mu_{J} & = & 0 \\\\\n  H_{a}: \\mu_{S} - \\mu_{J} & \\neq & 0 \\\\\n\\end{array}$$\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# observed difference in means\nobs_diff_means <- demo_df |>\n  filter(classStanding == \"Sophomore\" | classStanding == \"Junior\") |>\n  filter(diningCommons >= 0 & diningCommons <= 100) |>\n  specify(diningCommons ~ classStanding) |> \n  calculate(stat = \"diff in means\", order = c(\"Sophomore\", \"Junior\"))\nobs_diff_means\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: diningCommons (numeric)\nExplanatory: classStanding (factor)\n# A tibble: 1 × 1\n   stat\n  <dbl>\n1 0.677\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution <- demo_df |>\n  filter(classStanding == \"Sophomore\" | classStanding == \"Junior\") |>\n  filter(diningCommons >= 0 & diningCommons <= 100) |>\n  specify(diningCommons ~ classStanding) |>\n  hypothesize(null = \"independence\") |>\n  generate(reps = 1000, type = \"permute\") |> \n  calculate(stat = \"diff in means\", order = c(\"Sophomore\", \"Junior\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualize(null_distribution, bins = 10) + \n  shade_p_value(obs_stat = obs_diff_means, direction = \"two_sided\")\n```\n\n::: {.cell-output-display}\n![](Math_32_-_27_-_Hypothesis_Testing_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution |> \n  get_p_value(obs_stat = obs_diff_means, direction = \"two_sided\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  p_value\n    <dbl>\n1   0.906\n```\n:::\n:::\n\n\n\n## Happiness vs Top Choice\n\nThe survey questions were\n\n* \"Was UC Merced your top choice for university?\"\n* \"Rate your own happiness level\"\n\n* colloquial hypothesis: Those who felt UC Merced was their top choice are currently more happy.\n* null hypothesis: Average happiness levels are the same for those who felt UCM was their top choice or not.\n* alternative hypothesis: Those who felt UC Merced was their top choice are currently more happy.\n\n* predictor variable (categorical): `UCMtopChoice`\n* response variable (categorical): `happiness`\n\nIn this scenario, our one-sided hypothesis test looks at a difference of two proportions.\n\n\n$$\\begin{array}{rrcl}\n  H_{0}: \\mu_{A} - \\mu_{B} & = & 0 \\\\\n  H_{a}: \\mu_{A} - \\mu_{B} & > & 0 \\\\\n\\end{array}$$\n\n::: {.cell}\n\n```{.r .cell-code}\n# table(demo_df$UCMtopChoice)\ndemo_df |>\n  filter(happiness >= 0 & happiness <= 100) |>\n  specify(happiness ~ UCMtopChoice) |> \n  ggplot(aes(x = UCMtopChoice, y = happiness)) +\n  geom_boxplot(aes(fill = UCMtopChoice)) +\n  labs(title = \"Does Past Feelings about UCM Affect Current Happiness\",\n       subtitle = \"2022\",\n       caption = \"UC Merced\",\n       x = \"Was UC Merced their top choice?\",\n       y = \"happiness (0 = low, 100 = high)\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](Math_32_-_27_-_Hypothesis_Testing_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# observed difference in means\nobs_diff_means_2 <- demo_df |>\n  filter(happiness >= 0 & happiness <= 100) |>\n  specify(happiness ~ UCMtopChoice) |> \n  calculate(stat = \"diff in means\", order = c(\"Yes\", \"No\"))\nobs_diff_means_2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: happiness (numeric)\nExplanatory: UCMtopChoice (factor)\n# A tibble: 1 × 1\n   stat\n  <dbl>\n1  2.22\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution_2 <- demo_df |>\n  filter(happiness >= 0 & happiness <= 100) |>\n  specify(happiness ~ UCMtopChoice) |> \n  hypothesize(null = \"independence\") |>\n  generate(reps = 1000, type = \"permute\") |> \n  calculate(stat = \"diff in means\", order = c(\"Yes\", \"No\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nvisualize(null_distribution_2, bins = 10) + \n  shade_p_value(obs_stat = obs_diff_means_2, direction = \"greater\")\n```\n\n::: {.cell-output-display}\n![](Math_32_-_27_-_Hypothesis_Testing_files/figure-html/unnamed-chunk-35-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nnull_distribution_2 |> \n  get_p_value(obs_stat = obs_diff_means_2, direction = \"two_sided\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  p_value\n    <dbl>\n1   0.486\n```\n:::\n:::",
    "supporting": [
      "Math_32_-_27_-_Hypothesis_Testing_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}